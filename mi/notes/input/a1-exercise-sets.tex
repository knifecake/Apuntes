% !TeX root = ../mi-notes.tex


\chapter{Exercise sets}

\section{Exercise set 1}

Due September 20th, 2019.


\begin{ex}
	Let $X$ be a nonempty set and $\sa = \{A_1, A_2, \dots\}$ a collection of disjoint subsets of $X$ such that $X = \bigcup_{n = 1}^\infty A_n$. Show that each element $A \in \sigma(\sa)$ is a union of at most a countable subcollection of elements of $\sa$. (3 pts)
\end{ex}

The technique used here is similar to the good set principle (\autoref{rem:good-set-principle}), only that it is not necessary to show that the good set is inside the \siga.

\begin{proof}
	The idea is to prove that $\sigma(\sa)$ only contains countable unions of sets of $\sa$.
	
	Let us define
	\begin{align*}
		\calB = \left\{\bigcup_{i \in I} A_i \mid A_i \in \sa \land I \subset \N\right\}.
	\end{align*}
	
	We shall prove that $\calB$ is a \siga on $\sa$ and thus $\sigma (\sa) \subseteq \calB$, i.e. $\sigma(\sa)$ is made up of unions of at most a countable subcollection of $\sa$.
	
	\begin{enumerate}
		\item Firstly, $\emptyset \in \calB$ since $\emptyset = \bigcup_{i \in I} A_i$ by choosing $I = \emptyset \subset \N$.
		\item Secondly, for any set $B = \bigcup_{i \in I} A_i \in \calB$ we have that
		\begin{align*}
			B^\complement = \left(\bigcup_{i \in I} A_i\right)^\complement = \bigcap_{i \in I} A_i^\complement = \bigcap_{i \in I} \bigcup_{j \neq i} A_j = \bigcup_{j \not\in I} A_j = \bigcup_{j \in I^\complement} A_j \in \calB,
		\end{align*}
		since $I^\complement = \N \setminus I \subset \N$.
		
		\item Finally, for any countable collection $(B_n)_{n \in \N} \in \calB$ we need to show that the union is also in $\calB$.
		\begin{align*}
			\bigcup_{n\in\N} B_n = \bigcup_{n\in\N} \bigcup_{i \in I_n} A_i = \bigcup_{j \in J} A_j \in \calB,
		\end{align*}
		since $J = \bigcup_{n \in \N} I_n \subset \N$.
	\end{enumerate}
	Since we have shown that $\calB$ is a \siga on $\sa$ and thus $\sigma(\sa) \subset \calB$, we conclude that the elements of $\sigma(\sa)$ must be all unions of at most countable subcollections of elements in $\sa$, which are the only elements of $\calB$.
\end{proof}

\begin{ex}
	Let $(X, \calD, \mu)$ be a measure space, and let $\overline{\calD}^\mu$ be the completion of the \siga $\calD$ with respect to the measure $\mu$ (see exercise 4.15). We denote by $\overline{\mu}$ the extension of the measure $\mu$ to the \siga $\overline{\calD}^\mu$. Supose $f: X \to X$ is a function such that $\inv{f}(B) \in \calD$ and $\mu(\inf{f}(B)) = \mu(B)$ for each $B \in \calD$. Show that $\inf{f}(\overline{B}) \in \overline{\calD}^\mu$ and $\overline{\mu}(\inv{f}(\overline{B})) = \overline{\mu}(\overline{B})$ for all $\overline{B} \in \overline{\calD}^\mu$. (3 pts)
\end{ex}

\begin{proof}
	First we show that $\inv{f}(\overline{B}) \in \overline{\calD}^\mu$, for all $\overline{B} \in \overline{\calD}^\mu$. Recall from the definition of the completion $\overline{\calD}^\mu$ of the \siga $\calD$ that any set $\overline{B} \in \overline{\calD}^\mu$ can be written as $\overline{B} = B \cap M$ for some subset $M$ of a $\mu$-measurable null set $N$ in $\calD$. Therefore
	\begin{align*}
		\inv{f}(\overline{B}) = \inv{f}(B \cup M) = \inv{f}(B) \cup \inv{f}(M)
	\end{align*}
	Because $N \supset M$ we also have that $\inv{f}(N) \subset \inv{f}(M)$ and $\mu(\inv{f}(N)) = \mu(N) = 0$ by the definition of $f$. This means that $\inv{f}(M)$ is also a subset of a $\mu$-measurable null set in $\calD$ and since $\inv{f}(B) \in \calD$ by definition of $f$ we have
	\begin{align*}
		\inv{f}(\overline{B}) = \underbrace{\inv{f}(B)}_{\in \calD} \cup \underbrace{\inv{f}(M)}_{\subset \inv{f}(N),\ \mu(\inv{f}(N)) = 0} \in \overline{\calD}^\mu
	\end{align*}
	
	Now we need to verify that $\overline{\mu}(\inv{f}(\overline{B})) = \overline{\mu}(\overline{B})$ for all $\overline{B} \in \overline{\calD}^\mu$. Recall that the extension $\overline{\mu}$ is well-defined in $\overline{\calD}^\mu$ with $\overline{\mu}(\overline{B}) := \mu(B)$ for any $\overline{B} = B \cup M \in \overline{\calD}^\mu$. Hence,
	\begin{align*}
		\overline{\mu}(\inv{f}(\overline{B}))
		&= \overline{\mu}(\inv{f}(B \cup M)) \\
		&= \overline{\mu}(\inv{f}(B) \cup \inv{f}(M)) \\
		&= \mu(\inv{f}(B)) \\
		&= \mu(B) =: \overline{\mu}(\overline{B})
	\end{align*}
\end{proof}

\begin{ex}
	Let $(X, \sa)$ be a measurable space and $\mu : \sa \to [0, \infty)$ a function satisfying
	\begin{enumerate}
		\item $\mu$ is finitely additive
		\item $\mu$ is $\sigma$-subadditive
	\end{enumerate}
	Show that $\mu$ is $\sigma$-additive. (4 pts)
\end{ex}

\begin{proof}
	The plan for the proof is to sandwich $\mu(\bigcup_{n\in\N} A_n)$ between two sums that are the same when taking the limit.
		
	First of all, because of $\sigma$-subadditivity we have that, for any countable collection $(A_n)_{n\in\N} \subset \sa$,
	\begin{align}
		\label{eq:es1.3a}
		\mu(\bigcup_{n\in\N} A_n) \leq \sum_{n\in \N} \mu(A_n),
	\end{align}
	which in particular holds for pairwise disjoint unions, which we will assume from here on. We can rewrite the union as
	\begin{align*}
		\bigcupdot_{n\in \N} A_n = \bigcupdot_{n = 1}^N \cupdot \bigcupdot_{n = N+1}^\infty A_n.
	\end{align*}
	Because of finite additivity we can introduce the measure as
	\begin{align*}
		\mu\left(\bigcupdot_{n\in \N} A_n\right) = \mu\left(\bigcupdot_{n = 1}^N\right) + \mu\left(\bigcupdot_{n = N+1}^\infty A_n\right).
	\end{align*}
	And applying finite additivity again we get
	\begin{align*}
		\mu\left(\bigcupdot_{n\in \N} A_n\right) = \sum_{n = 1}^N \mu(A_n) + \mu\left(\bigcupdot_{n = N+1}^\infty A_n\right).
	\end{align*}
	Since $\mu \geq 0$ we can rearrange the previous expression to obtain
	\begin{align}
		\label{eq:es1.3b}
		\sum_{n = 1}^N \mu(A_n) \leq \sum_{n = 1}^N \mu(A_n) + \mu\left(\bigcupdot_{n = N+1}^\infty A_n\right) = 	\mu\left(\bigcupdot_{n\in \N} A_n\right)
	\end{align}
	By combining \ref{eq:es1.3a} and \ref{eq:es1.3b} we get
	\begin{align*}
		\sum_{i = 1}^N \mu(A_n) \leq \mu\left(\bigcupdot_{n\in \N} A_n\right) \leq \sum_{n \in \N} \mu(A_n)
	\end{align*}
	Taking the limit as $N \to \infty$, which we can do since $N$ is not inside the arguments to $\mu$ (in that case it would require that $\mu$ was already a measure, which it isn't, yet), we have
	\begin{align*}
		\sum_{n \in \N} \mu(A_n) \leq \mu\left(\bigcupdot_{n\in \N} A_n\right) \leq \sum_{n \in \N} \mu(A_n) \implies \mu\left(\bigcupdot_{n\in \N} A_n\right) = \sum_{n \in \N} \mu(A_n),
	\end{align*}
	or that $\mu$ is $\sigma$-additive.
\end{proof}


\section{Exercise set 2}

Due September 27th, 2019.

\begin{ex}
	Let $\Q$ be the set of all real rational numbers and let $\calI_\Q = \{[a, b)_\Q \mid a,b \in \Q\}$ where $[a,b)_\Q = \{q \in \Q \mid a \leq q < b\}$.
	\begin{enumerate}
		\item Prove that $\sigma(\calI_\Q) = \powerset(\Q)$ where $\powerset(\Q)$ is the collection of all subsets of $\Q$. (1.5 pts.)
		\item Let $\mu$ be the counting measure on $\powerset(\Q)$ and let $\nu = 2\mu$. Show that $\nu(A) = \mu(A)$ for all $A \in \calI_\Q$, but $\nu \neq \mu$ on $\sigma(\calI_\Q) = \powerset(\Q)$. Why doesn't this contradict Theorem 5.7 in your book? (1.5 pts.)
	\end{enumerate}
\end{ex}

\begin{proof}$ $\newline
	\begin{enumerate}
		\item We shall prove the double containment. First, recall that $\powerset(\Q)$ is a \siga on $\Q$. Also, by Remark 3.5 we have that $\calI_\Q \subseteq \powerset(\Q) \implies \sigma(\calI_\Q) \subseteq \sigma(\powerset(\Q)) \subseteq \powerset(\Q)$. The last inclusion comes from the fact that $\powerset(\Q)$ is also a \siga on $\Q$ so it must contain the smallest \siga on $\Q$ that contains information about $\powerset(\Q)$. For the reverse containment, we shall prove that any subset $A \in \powerset(\Q)$ is also in $\sigma(\calI_\Q)$. For any $A \subset \Q$ define $(q_n)_{n \in \N}$ to be an enumeration of the rationals in $A$. This is posible since $\# \Q = \# \N$. Therefore, we can write
		\begin{align*}
			A = \bigcup_{n \in \N} \{q_n\},\text{ where } \{q_n\} \in \sigma(\calI_\Q)
		\end{align*}
		Therefore, $A \in \sigma(\calI_\Q)$ because \sigas are closed under countable union.
		
		\item It is clear that any interval $A \in \calI_\Q$ contains infinitely many rationals, except if the interval is empty, i.e. $a = b \implies [a,b) = \emptyset$. Therefore,
		\begin{align*}
			\mu(A) = \nu(A) = \begin{cases}
			0       \tif A = \emptyset \\
			\infty &\text{ otherwiseÂ }
			\end{cases}
		\end{align*}
		But, if we consider $A \in \sigma(\calI_\Q) = \powerset(\Q)$ then we have some finite sets where $\mu(A) = \# A$, and clearly $\nu(A) = 2 \# A$. The equality between $\mu$ and $\nu$ only holds when the set is either empty or infinite, but not for finite sets such as $A = \{1, 2\}$ where $\mu(A) = 2$ but $\nu(A) = 4$.
		
		Why doesn't this contradict Theorem 5.7? Even though there is an exhausting sequence in the generator, namely $(A_n)_{n\in\N}$ where $A_n = [-n, n)_\Q$, the measure is not finite for any $A_n$. Moreover, there cannot be any exhausting sequence in $\calI_\Q$ with a finite measure because we already saw that $\mu(A) = \infty,\ \forall A \in \calI_\Q,\ A \neq \emptyset$.
	\end{enumerate}
\end{proof}

\begin{ex}
	Let $X$ be a set and $\mu, \nu:\powerset(X) \to [0, \infty)$ two outer measures on $X$. Define $\rho: \powerset(X) \to [0, \infty)$ by $\rho(A) = \max(\mu(A), \nu(A))$. Show that $\rho$ is another outer measure on $X$.
\end{ex}

\begin{proof}
	Firstly, from the definition of $\rho$ we can see that the domain and codomain are compatible with the definition of an outer measure. Next, we prove each of the properties of an outer measure.
	\begin{enumerate}
		\item $\rho(\emptyset) = \max(\mu(\emptyset), \nu(\emptyset)) = \max (0, 0) = 0$
		\item For any $A, B \in \powerset(X),\ A \subseteq B$ we have
		\begin{align*}
			\rho(A) =\max(\mu(A), \nu(A)) \leq \max (\mu(B), \nu(B)) = \rho(B)
		\end{align*}
		\item For any sequence $(A_n)_{n\in \N} \subset \powerset(X)$ we must verify that $\rho(\bigcup_{n \in \N} A_n) \leq \sum_{n\in \N} \rho(A_n)$.
		
		Let us prove the following first. For any function $f: X \times Y \to \R$ we have
		\begin{align*}
			\max_{x \in X} \sum_{y \in Y} f(x, y) \leq \sum_{y \in Y} \max_{x \in X} f(x, y)
		\end{align*}
		Choose any $x_0 \in X$ and any $y_0 \in Y$ and we have that $f(x_0, y_0) \leq \max f(x_0, y_0)$. Hence $\sum_{y \in Y} f(x_0, y) \leq \sum_{y \in Y} f(x, y)$. Because this is true for all $x_0 \in X$ we have $\max_{x \in X} \sum_{y \in Y} f(x, y) \leq \sum_{y \in Y} \max_{x \in X} f(x,y)$.
		
		Using this, i.e. choosing $Y = \N,\ X = \{\mu, \nu\}$ and defining $f(\mu, n) = \mu(A_n)$ and $f(\nu, n) = \nu(A_n)$ we have
		\begin{multline*}
			\rho(\bigcup_{n \in \N} A_n) = \max\left\{\mu\left(\bigcup_{n \in \N} A_n\right), \nu\left(\bigcup_{n \in \N} A_n\right) \right\} = \max \left\{\sum_{n\in \N} \mu(A_n), \sum_{n\in \N} \nu(A_n) \right\} \\
			\leq \sum_{n\in \N} \max\{\mu(A_n), \nu(A_n)\} = \sum_{n\in \N} \rho(A_n)
		\end{multline*}
	\end{enumerate}
\end{proof}


\begin{ex}
	Let $(X, \sa, \mu)$ be a measure space. For $A \in \sa$ let
	\begin{align*}
		S(A) := \{B \in \sa \mid B \subset A, \mu(B) < \infty\}.
	\end{align*}
	
	Define $\nu: \sa \to [0, \infty]$ by $\nu(A) := \sup\{ \mu(B) \mid B \in S(A)\}$.
	
	\begin{enumerate}
		\item Show that $\nu$ is monotone, i.e. if $A_1, A_2 \in \sa$ such that $A_1 \subseteq A_2$, then $\nu(A_1) \leq \nu(A_2)$. (0.5 pts).
		\item Show that if $A \in \sa$ with $\mu(A) < \infty$, then $\nu(A) = \mu(A)$. (1 pt.)
		\item Show that $\nu$ is a measure on $\sa$. (2.5 pts.)
		\item Show that if $\mu$ is $\sigma$-finite, the $\mu = \nu$. (1 pt.)
	\end{enumerate}
\end{ex}

\begin{proof}
	$ $\newline
	\begin{enumerate}
		\item We first show that if $A_1 \subseteq A_2$, then $S(A_1) \subseteq A_2$. Let $C \in S(A_1)$, then $C \in \sa \land C \subset A_1 \land \mu(C) < \infty$. Clearly $C \subseteq A_2$ since $A_1 \subseteq A_2$ so $C \in S(A_2)$. Finally,
		
		\begin{align*}
			\nu(A_1) = \sup \{\mu(B) \mid B \in S(A_1)\} \leq \sup \{\mu(B) \mid B \in S(A_2)\} = \nu(A_2).
		\end{align*}
		
		\item Clearly the domain and range of $\nu$ are compatible with the definition of a measure, i.e. $\nu: \sa \to [0, \infty]$. We need to show that the two properties from \autoref{dfn:measure} hold.
		\begin{enumerate}
			\item $\nu(\emptyset) = \sup \{\nu(B) \mid B \in S(\emptyset)\} = \mu(\emptyset) = 0$ since $S(\emptyset) = \{ \emptyset\}$.
			\item Let $(A_n)_{n\in\N} \subset \sa$ be a pairwise disjoint sequence of sets in $\sa$. Then,
			\begin{align*}
				\nu\left(\bigcupdot_{n \in \N} A_n\right) = 
			\end{align*}
		\end{enumerate}
	\end{enumerate}
\end{proof}


\section{Exercise set 3}

Due October 4th, 2019.

\begin{ex}
	Let $(X, \sa, \mu)$ be a measure space and $\calG=\{A_1, A_2, \dots\}$ a countable partition of $X$ with $A_k \in \sa,\ \forall k \in \N$. Define a function $u : X \to \R$ by $u(x) = \sum_{k = 1}^{\infty} k \cdot \ind_{A_k}$.
	
	\begin{enumerate}
		\item Show that $u$ is $\sa/\borel(\R)$-measurable. (1.5 pts)
		\item Show that $\sigma(\mu) = \sigma(\calG)$, where $\sigma(\mu)$ is the smallest \siga making $u$ measurable. (2.5 pts)
		\item Suppose that $0 < \mu(A_n) < \infty$ for all $n \in \N$. Define $\nu$ on $\sa$ by
		\begin{align*}
		\nu(B) = \sum_{n = 1}^{\infty} 3^{-n} \cdot \frac{\mu(B \cap A_n)}{\mu (A_n)}.
		\end{align*}
		Show that $\nu$ is a \textbf{finite} measure on $(X, \sa)$. (1.5 pts)
		
		\item Under the assumptions of part 3, prove that if $B \in \sa$, then $\mu(B) = 0$ if and only if $\nu(B) = 0$. (1 pt)
	\end{enumerate}
\end{ex}

\begin{proof}$ $\newline
	\begin{enumerate}
		\item Observe that the function $u(x)$ always evaluates to a natural number. In particular, $u(x) = k$ for the $k \in \N$ that satisfies $x \in A_k$. $u$ is well-defined since $\calG$ is a countable partition of $X$.
		
		We must check whether for any $B \in \borel(\R), \inv{u}(B) \in \sa$. Given a $B \in \borel(\R)$ we rewrite it as $B = B' \cup B_{nat}$ where $B_{nat}$ contains all the naturals in $B$ and $B' = B \setminus B_{nat}$. Then,
		\begin{align*}
		\inv{u}(B) = \inv{u}(B' \cup B_{nat}) = \inv{u}(B') \cup \inv{u}(B_{nat}) = \emptyset \cup \bigcup_{n \in B_{nat}} A_n \in \sa.
		\end{align*}
		
		\item By definition of $\sigma(u)$ we have
		\begin{align*}
		\sigma(u) := \sigma (\inv{u}(\borel(\R))) = \inv{u}(\borel(\R)),
		\end{align*}
		since the preimage of any \siga is a \siga.
		
		Also, recall from exercise set 1 that
		\begin{align*}
		\sigma(\calG) = \left\{ \bigcup_{i \in I} A_i \mid A_i \in \calG,\ I \subset \N \right\}.
		\end{align*}
		
		Now we prove the double containment. Take any $A \in \sigma(u)$. Then there is a $B \in \borel(\R)$ such that $A = \inv{u}(B)$. By part one we already now that
		\begin{align*}
		A = \emptyset \cup \bigcupdot_{n \in B_{nat}} A_n \in \sigma(\calG).
		\end{align*}
		
		For the reverse containment, let $G \in \sigma(\calG)$, therefore there is a set $I \subset \N$ such that $G = \bigcup_{i \in I} A_i$. Furthermore, $I \in \borel(\R)$ and thus, by part one,
		\begin{align*}
		\bigcup_{i \in I} A_i = \inv{u}(I) \in \sigma(u).
		\end{align*}
		
		\item First let us check that $\nu$ is well defined. $\nu(B)$ is well defined for any $B \in \sa$ since $B \cap A_n \in \sa$ as $\sa$ is \istable. Also, $\nu$ is non-negative since it is computed as a sum of products of non-negative numbers.
		
		Now we check the two properties in the definition of measure:
		\begin{enumerate}
			\item
			\begin{align*}
			\nu(\emptyset) = \sum_{n=1}^{\infty} 3^{-n} \cdot \frac{\mu(\emptyset \cap A_n)}{\mu(A_n)} = \sum_{n=1}^{\infty} 3^{-n} \cdot \frac{\mu(\emptyset)}{\mu(A_n)} = \sum_{n=1}^{\infty} 3^{-n} \cdot \frac{0}{\mu(A_n)} = 0
			\end{align*}
			\item For any pairwise disjoint collection $(B_n)_{n\in \N} \subset \sa$ we have
			\begin{align*}
			\nu\left(\bigcupdot_{j\in \N} B_j\right) &= \sum_{n = 1}^\infty 3^{-n} \cdot \frac{\mu\left(\left(\bigcupdot_{j\in \N} B_j\right) \cap A_n\right)}{\mu(A_n)}\\
			&= \sum_{n = 1}^\infty 3^{-n} \cdot \frac{\mu\left(\bigcupdot_{j\in \N} (B_j \cap A_n)\right)}{\mu(A_n)} \\
			&= \sum_{n = 1}^\infty 3^{-n} \cdot \frac{\sum_{j \in \N}\mu\left(B_j \cap A_n\right)}{\mu(A_n)} \\
			&= \sum_{j\in\N} \sum_{n=1}^{\infty} 3^{-n}\cdot \frac{\mu\left(B_j \cap A_n\right)}{\mu(A_n)} = \sum_{j \in \N} \nu(B_j)
			\end{align*}
		\end{enumerate}
		
		Additionally, we must check that $\nu$ is finite. Since $\mu$ is a measure, it is monotone so $\mu(B \cap A_n) \leq \mu(A_n)$ and thus
		\begin{align*}
		\nu(B) = \sum_{n = 1}^{\infty} 3^{-n} \cdot \frac{\mu(B \cap A_n)}{\mu (A_n)} \leq \sum_{n = 1}^{\infty} 3^{-n} < \infty
		\end{align*}
		
		
		\item It is clear that if $\mu(B) = 0$ then, by monotonicity, since $B \cap A_n \subset B$, we have that $0 \leq \mu(B \cap A_n) \leq \mu(B) = 0$ and therefore $\nu(B) = \sum_{n = 1}^\infty 3^{-n} \cdot 0 = 0$.
		
		For the reverse, we have that if $\nu(B) = 0$, then it must be because $\mu(B \cap A_n) = 0,\ \forall n \in \N$ since $3^{-n} > 0,\ \forall n \in \N$. We can rewrite $\mu(B)$ as
		\begin{align*}
		\mu(B) = \mu(B \cap X) = \mu\left(B \cap \bigcupdot_{j\in \N} A_j\right) = \mu\left(\bigcupdot_{j\in \N} B \cap A_j\right) \\
		= \sum_{j \in \N} \mu(B \cap A_j) = \sum_{j \in \N} 0 = 0.
		\end{align*}
		Therefore $\mu(B) = 0 \iff \nu(B) = 0,\ \forall B \in \sa$.
	\end{enumerate}
\end{proof}

\begin{ex}
	Consider the measure space $([0, 1], \borel, \lambda)$ where $\borel = \borel(\R) \cap [0, 1)$, i.e. the restriction of the Borel \siga to the interval $[0, 1)$, and $\lambda$ denotes the Lebesgue measure restricted to $\borel$. Define a map $T:[0, 1) \to [0, 1)$ by
	\begin{align*}
	T(x) = \begin{cases}
	4x \tif 0 \leq x \leq \frac{1}{4},\\
	\frac{4}{3}( x - \frac{1}{4}) \tif \frac{1}{4} \leq x < 1.
	\end{cases}
	\end{align*}
	
	\begin{enumerate}
		\item Show that $T$ is $\borel/\borel$-measurable (in short, Borel measurable). (1.5 pts)
		\item Consider the image measure $T(\lambda)$ defined by $T(\lambda)(B) = \lambda(\inv{T}(B))$, for all $B \in \borel$. Show that $T(\lambda) = \lambda$. (2 pts)
	\end{enumerate}
\end{ex}

\begin{proof}$ $\newline
	\begin{enumerate}
		\item It is enough to check if $\inv{T}([a,b)) \in \borel$, since $\calJ \cap [0, 1) = \{[a, b) \mid 0 \leq a \leq b \leq 1\}$ is a generator of $\borel$.
		
		\begin{align*}
		\inv{T}([a,b)) &= \{x \in [0, 1) \mid T(x) \in [a, b)\} \\
		&= \left\{x \in [0, \frac{1}{4}) \mid T(x) \in [a, b)\right\} \cup \left\{x \in [\frac{1}{4}, 1) \mid T(x) \in [a, b)\right\} \\
		&= \left\{x \mid 0 \leq a \leq x < b \leq \frac{1}{4}\right\} \cup \left\{x \mid \frac{1}{4} \leq a \leq \frac{4}{3}( x - \frac{1}{4}) < b \leq 1\right\} \\
		&= \left[\frac{a}{4}, \frac{b}{4}\right) \cup \left[\frac{3a}{4} + \frac{1}{4}, \frac{3b}{4} + \frac{1}{4}\right) \in \borel,
		\end{align*}
		since each of the intervals is itself in $\calJ \cap [0,1)$. (This is because $0 \leq \frac{a}{4}, \frac{b}{4}, \frac{3a}{4} + \frac{1}{4}, \frac{3b}{4} + \frac{1}{4} < 1$ since $a, b \in [0, 1)$.)
		
		\item First we will prove that $T(\lambda)([a, b)) = \lambda([a, b)), \forall [a, b) \in \calJ \cap [0,1)$. Using the same as in part one we have
		\begin{align*}
		T(\lambda)([a, b)) &= \lambda(\inv{T}[a,b))\\
		&= \lambda\left(\left[\frac{a}{4}, \frac{b}{4}\right) \cupdot \left[\frac{3a}{4} + \frac{1}{4}, \frac{3b}{4} + \frac{1}{4}\right)\right) \\
		&= \frac{b}{4} - \frac{a}{4} + \frac{3b}{4} + \frac{1}{4} - \frac{3a}{4} - \frac{1}{4} \\
		&= b - a = \lambda([a, b)).
		\end{align*} 
		Recall that $\borel = \sigma(\calJ \cap [0,1))$ and that there exists an exhausting sequence $B_n \uparrow [0,1)$ where $B_n = [0,1),\ \forall n \in \N$ and that $\lambda([0, 1)) < \infty$ and $T(\lambda)([0,1)) = \lambda(\inv{T}([0,1))) = \lambda([0,1)) < \infty$. Then, by uniqueness, we have that $T(\lambda) = \lambda$ on all $\borel$.
	\end{enumerate}
\end{proof}

\section{Exercise set 4}

Due October 25th, 2019.

\begin{ex}
	Let $(X, \sa, \mu)$ be a measure space and $u \in \calL^1_\Rb(\mu)$. Define $B_n = \{ x \in X \mid 2^{-n} \leq \abs{u(x)} < 2^n\}$, for $n \geq 1$. Set $B = \bigcup_{n = 1}^\infty B_n$.
	
	\begin{enumerate}
		\item Show that $\int_X u d\mu = \int_B u d\mu$. (1.5 pts)
		\item Prove that $\lim_{n \to \infty} \int_{B_n} u d\mu = \int_X u d\mu$. (1.5 pts)
		\item Show that for every $\varepsilon > 0$, there exists a positive integer $N$, such that $\mu(B_N) < \infty$ and $\abs{\int_{B_N^\complement} ud\mu} < \varepsilon$. (1.5 pts)
	\end{enumerate}
\end{ex}

\begin{proof}$ $\newline
	\begin{enumerate}
		\item We have that $u: X \to \Rb$ so for every $n \in \N,\ B_n \subset X$. Therefore, $B = \bigcup_{n=1}^\infty B_n \subset X$ and we may write
		\begin{align*}
		\int_X u d\mu
		= \int_B u d\mu + \int_{B^\complement} u d\mu.
		\end{align*}
		
		We will show that $\int_{B^\complement} u d\mu = 0$. We have that
		\begin{align*}
		B^\complement = \left( \bigcup_{n=1}^\infty B_n \right)^\complement = \bigcap_{n=1}^\infty B_n^\complement.
		\end{align*}
		For each $n \in \N$, $B_n^\complement = \{\abs{u} < 2^{-n}\} \cupdot \{\abs{u} \geq 2^n\}$ and $B_1^\complement \supset B_2^\complement \supset \dots$, so $(B_n^\complement)$ is a decreasing sequence with $B_n^\complement \downarrow B^\complement$. We can further split $\int_{B^\complement} u d\mu$ as
		\begin{align*}
		\int_{B^\complement} ud\mu
		&= \lim_{n\to\infty} \left(\int_{\{\abs{u} < 2^{-n}\}} ud\mu + \int_{\{\abs{u} \geq 2^n\}} u d\mu\right) \\
		&= \lim_{n\to\infty} \int_{\{\abs{u} < 2^{-n}\}} ud\mu + \lim_{n\to\infty} \int_{\{\abs{u} \geq 2^n\}} u d\mu.
		\end{align*}
		
		For the first integral we have that
		\begin{align*}
		\lim_{n\to\infty} \int_{\{\abs{u} < 2^{-n}\}} ud\mu
		\leq \lim_{n\to\infty} \int_{\{\abs{u} < 2^{-n}\}} 2^{-n} d\mu
		\leq \lim_{n\to\infty} \int 2^{-n} d\mu.
		\end{align*}
		
		Since $2^{-n} \geq 2^{-(n+1)} \geq \dots \geq 0$ is a decreasing sequence of $\mu$-integrable functions, the Monotone Convergence Theorem applies and
		\begin{align*}
		\lim_{n\to\infty} \int_{\{\abs{u} < 2^{-n}\}} ud\mu
		\leq \lim_{n\to\infty} \int 2^{-n} d\mu 
		= \int \inf_{n\in\N} 2^{-n} d\mu
		= \int 0 d\mu = 0.
		\end{align*}
		
		For the second integral, we use Markov's inequality to get
		\begin{align*}
		\mu(\{\abs{u} \geq 2^n\}) \leq \frac{1}{2^n} \int u d\mu.
		\end{align*}
		Since $u \in \calL^1_\Rb(\mu)$, we have that $\int{u} d\mu$ is a finite number so we can take the limit to get
		\begin{align*}
		\lim_{n\to\infty} \mu(\{\abs{u} \geq 2^n\}) \leq \lim_{n\to\infty} \frac{1}{2^n} \int u d\mu = \lim_{n\to\infty} \frac{1}{2^n} = 0,
		\end{align*}
		so $\{\abs{u} \geq 2^n\}$ is a $\mu$-null set and $\int_{\{\abs{u} \geq 2^n\}} u d\mu = 0$. We conclude that $\int_{B^\complement} u d\mu = 0$ and therefore $\int_X u d\mu = \int_B u d\mu$.
		
		
		\item Define $(u_n)_{n\in\N}$ by $u_n = u \ind_{B_n}$. Clearly, $u_n \uparrow u \ind_B$ and $u_n \leq u_{n+1}$. So the Monotone Convergence Theorem applies and
		\begin{align*}
		\lim_{n \to \infty} \int_{B_n} u d\mu
		&= \lim_{n \to \infty} \int u \ind_{B_n} d \mu \\
		&= \lim_{n \to \infty} \int u_n d\mu\\
		&= \int \lim_{n \to \infty} u_n d\mu\\
		&= \int u \ind_B d\mu\\
		&= \int_B ud\mu = \int_X u d\mu.
		\end{align*}
		
		\item As before, we write,
		\begin{align*}
		\int_{B_N^\complement} u d\mu
		= \int_X u d\mu - \int_{B_N} u d\mu.
		\end{align*}	
		By the definition of limit and part 2 we know that for every $\varepsilon > 0$, there exists an $N \in \N$ such that
		\begin{align*}
		\abs{\int_{B_N} u d\mu - \int_X u d\mu} = \abs{ \int_X u d\mu - \int_{B_N} u d\mu} < \varepsilon.
		\end{align*}
		Therefore,
		\begin{align*}
		\abs{\int_{B_N^\complement} u d\mu} = \abs{\int_X u d\mu - \int_{B_N} u d\mu} < \varepsilon.
		\end{align*}
		We just need to check that $\mu(B_N) < \infty$. For that we use the fact that $B_N \subset \{\abs{u} \leq 2^N\}$ and a version of Markov's inequality:
		\begin{align*}
		\mu(B_N)
		\leq \mu(\{\abs{u} \leq 2^N \})
		\leq \frac{1}{2^N} \int \abs{u} d\mu < \infty,
		\end{align*}
		since $u \in \calL_\Rb^1(\mu) \implies \abs{u} \in \calL_\Rb^1(\mu)$.
	\end{enumerate}
\end{proof}

\begin{ex}
	Consider the measure space $([0,1], \borel([0, 1]), \lambda)$ where $\borel([0,1])$ is the restriction of the Borel \siga to $[0,1]$, and $\lambda$ is the restriction of the one-dimensional Lebesgue measure to $[0,1]$.
	
	\begin{enumerate}
		\item Show that $\lim_{n \to \infty} \int_{[0,1]} \frac{x^n}{(1+ x)^2}d\lambda(x) = 0$. (1.5 pts)
		\item Show that $\lim_{n \to \infty} \int_{[0,1]} \frac{n x^{n-1}}{1 + x} d\lambda(x) = \frac{1}{2}$. (1 pt)
	\end{enumerate}
\end{ex}

\begin{proof}$ $\newline
	\begin{enumerate}
		\item Let $u_n = \frac{x^n}{(1+ x)^2}$. We have that, for every $n \in \N$ and every $x \in [0,1]$,
		\begin{align*}
		x^n \leq 1 \leq (1 + x)^2 \implies \abs{u_n} \leq 1, \forall x \in [0,1],\ n \in \N.
		\end{align*}
		We can rewrite $u_n$ as
		\begin{align*}
		u_n(x) = \frac{x^n}{(1+ x)^2}\ind_{[0,1)} + \frac{x^n}{(1+ x)^2}\ind_{\{1\}} = \frac{x^n}{(1+ x)^2}\ind_{[0,1)} + \frac{1}{4}\ind_{\{1\}},
		\end{align*}
		and therefore
		\begin{align*}
		\lim_{n\to\infty} u_n(x)
		&= \lim_{n\to\infty}\left( \frac{x^n}{(1+ x)^2}\ind_{[0,1)}(x) + \frac{1}{4}\ind_{\{1\}}(x) \right) \\
		&= 0\cdot\ind_{[0,1)}(x) + \frac{1}{4}\cdot\ind_{\{1\}}(x) \\
		&= \frac{1}{4}\ind_{\{1\}}(x),\quad \forall x \in [0,1].
		\end{align*}
		
		Therefore $(u_n)_{n\in\N}$ is a sequence of $\mu$-integrable functions bounded by $1$ and we can apply the Lebesgue Dominated Convergence theorem to obtain
		\begin{align*}
		\lim_{n\to\infty} \int_{[0,1]} u_n d\lambda(x)
		&= \int_{[0,1]} \lim_{n \to \infty} u_n d\lambda(x)\\
		&= \int \frac{1}{4}\ind_{\{1\}}(x) d\lambda(x)\\
		&= \int_{\{1\}} \frac{1}{4}d\lambda(x)
		= 0,
		\end{align*}
		since $\lambda(\{1\}) = 0$.
		
		\item
	\end{enumerate}
\end{proof}

\begin{ex}
	Let $(X, \sa, \mu)$ be a measure space, and $u \in \calL^p(\mu)$ for some $p \in [1, \infty)$. For $n \geq 1$, define $u_n = \min\{ \max(u, -n), n \}$.
	
	\begin{enumerate}
		\item Prove that $\lim_{n\to\infty} \norm{u_n}_p = \norm{u}_p$. (2 pts)
		\item Prove that for any $\varepsilon$, there exists an integer $n \geq 1$ such that $\int \abs{u - u_n}^p \leq \varepsilon$. (1 pt)
	\end{enumerate}
\end{ex}

\begin{proof}$ $\newline
	\begin{enumerate}
		\item Observe that we may rewrite $u_n$ as
		\begin{align*}
			u_n(x) = \begin{cases}
			-n \tif u(x) < n\\
			u(x) \tif -n \leq u(x) \leq n \\
			n \tif n < u(x)
			\end{cases}
		\end{align*}
		and therefore
		\begin{align*}
			\abs{u_n(x)} = \begin{cases}
			u(x) \tif 0 \leq \abs{u(x)} \leq n\\
			n \tif n < \abs{u(x)}
			\end{cases}.
		\end{align*}
		From this we can see that $\abs{u_n} \leq \abs{u_{n+1}} \leq \abs{u}$ and thus $(\abs{u_n})_{n\in\N}$ is an increasing sequence of non-negative functions which converges to $\abs{u}$. Therefore we can use Beppo-LÃ©vi to get
		\begin{align*}
			\lim_{n\to\infty} \norm{u_n}_p
			&= \lim_{n\to\infty} \left( \int \abs{u_n}^pd\mu \right)^{\frac{1}{p}}\\
			&= \left(\lim_{n\to\infty} \int \abs{u_n}^pd\mu \right)^{\frac{1}{p}}\\
			&\overset{\ref{thm:beppo-levi}}{=} \int \left(\lim_{n\to\infty} \abs{u_n}^pd\mu \right)^{\frac{1}{p}}\\
			&= \int \left(\abs{u}^pd\mu \right)^{\frac{1}{p}}
			= \norm{u}_p
		\end{align*}
		\item From part one we know that $\lim_{n\to\infty} \norm{u_n}_p = \norm{u}_p$. Therefore, by Riesz's theorem, we have that $\lim_{n\to\infty}\norm{u_n - u}_p = 0$. From the definition of limit we get that for any $\varepsilon' > 0$, there exists an $N \in \N$ such that
		\begin{align*}
		\left( \int \abs{u_N - u}^p d\mu \right)^{\frac{1}{p}} < \varepsilon'.
		\end{align*}
		Raising everything to the power of $p$ we get
		\begin{align*}
		\int \abs{u_N - u}^p d\mu = \int \abs{u - u_N}^p d\mu < (\varepsilon')^p.
		\end{align*}
		
		Choose $\varepsilon' = \varepsilon^{\frac{1}{p}}$ and the proof follows.
	\end{enumerate}
\end{proof}


\section{Practice Mid-Term, 2019-2020.}

\begin{ex}
	Let $(X, \sa)$ be a measure space such that $\sa = \sigma(\calG)$ where $\calG$ is a collection of subsets of $X$ such that $\emptyset \in \calG$. Show that for any $A \in \sa$ there exists a countable collection $\calG_A \subseteq \calG$ such that $A \in \sigma(\calG_A)$.
\end{ex}

\begin{proof}
	This exercise presents a good opportunity to apply the good set principle (cf. \autoref{rem:good-set-principle}).
	
	Let
	\begin{align*}
		\calB := \{ A \in \sa \mid \exists \calG_A \subset \calG \text{ countable, } A \in \sigma(\calG_A)\}.
	\end{align*}
	
	First, we will show that $\calB$ is a \siga.
	\begin{enumerate}
		\item Clearly $X \in \sa$. Let $G_X = \{\emptyset\}$ which is clearly finite and $G_X \subset \calG$ by hypothesis. Then $\sigma(\calG_X) = \{\emptyset, \emptyset^\complement\} = \{\emptyset, X\} \implies X \in \calB$.
		\item Let $A \in \calB$. Then $A \in \sa$ by definition of $\calB$ and there exists $\calG_A \subset \calG$ countable with $A \in \sigma(\calG_A)$. Since $\sigma(\calG_A)$ is a \siga it contains $A^\complement$ and clearly $A^\complement \in \sa$. Let $\calG_{A^\complement} = \calG_A$ and therefore $A^\complement \in \calB$.
		\item Finally, let $(A_n)_{n\in\N} \subset \calB$. Clearly, $(A_n)_{n\in\N} \subset \sa$ and, for each $n \in \N$, there exists $\calG_{A_n} \subset \calG$ countable such that $A_n \in \sigma(\calG_{A_n})$. Also, since $\sa$ is a \siga, we have that $\bigcup_{n\in\N}A_n \in \sa$. Let
		\begin{align*}
			\calG_{\bigcup_{n\in\N} A_n} = \bigcup_{n\in\N} \calG_{A_n}.
		\end{align*}
		$\calG_{\bigcup_{n\in\N} A_n} \subset \calG$ is countable since every $\calG_{A_n} \subset \calG$ is countable and $\calG_{\bigcup_{n\in\N} A_n}$ is a countable union of countable sets. Therefore $\bigcup_{n\in\N} A_n \in \calB$.
	\end{enumerate}

	Now we show that $\calB = \sa$. Clearly, from the definition of $\calB$ we see that $\calB \subseteq \sa$. For the reverse containment, we will show that $\calG \subset \calB$ and therefore $\sa = \sigma(\calG) \subseteq \sigma(\calB) = \calB$. Let $A \in \calG \subset \sa$. Define $\calG_A = \{A\} \subset \calG$ and clearly finite and $A \in \sigma(\calG_A)$. Therefore $A \in \calB,\ \forall A \in \calG \implies \calG\subset \calB$.
\end{proof}

\begin{ex}
	Let $X$ be a set and $\calF$ a collection of real-valued functions on $X$ satisfying the following properties:
	\begin{enumerate}
		\item $\calF$ contains the constant functions,
		\item if $f, g \in \calF$ and $c \in \R$, then $f + g,\ fg, cf \in \calF$.
		\item if $f_n \in \calF$, and $f = \lim_{n \to \infty} f_n$, then $f \in \calF$.
	\end{enumerate}

	For $A \subseteq X$, denote by $\ind_{A}$ the indicator function of $A$, i.e.
	
	\begin{align*}
		\ind_A(x) = \begin{cases}
		1 \tif x \in A,\\
		0 \tif x \not\in A.
		\end{cases}
	\end{align*}
	Show that the collection $\sa = \{ A \subseteq X \mid \ind_A \in \calF\}$ is a \siga.
\end{ex}

\begin{proof}
	We shall prove that the three properties of a \siga hold in $\sa$:
	\begin{enumerate}
		\item $X \in \sa$ since $\ind_X(x) = 1$ constantly, and therefore $\ind_X \in \calF$.
		\item if $A \in \sa$, then $\ind_A \in \calF$. We can write $\ind_{A^\complement} = 1 - \ind_A$. Since $1, 1_A \in \calF$ we have $\ind_{A^\complement} \in \calF \implies A^\complement \in \sa$.
		\item Let $(A_n)_{n\in \N} \subset \sa$. Then $(\ind_{A_n})_{n\in\N} \in \calF$. We can write
		\begin{align*}
			\ind_{\bigcup_{n\in\N} A_n} = \sum_{n=1}^{\infty} \ind_{A_i}
		\end{align*}
		To prove $\ind_{\bigcup_{n\in\N} A_i} \in \calF$ we construct the following sequence of functions $(f_n)_{n\in\N} \in \calF$ given by
		\begin{align*}
			f_n = \sum_{i=1}^{n} \ind_{A_i} = \ind_{A_n} + f_{n-1}
		\end{align*}
		Clearly, $f_n \in \calF$ for all $n$ because of property 2. Then,
		\begin{align*}
			f = \lim_{n \to \infty} f_n = \sum_{i = 1}^\infty \ind_{A_i} = \ind_{\bigcup_{n\in\N} A_n} \in \calF,
		\end{align*}
		and thus, $\bigcup_{n\in\N} A_i \in \sa$.
	\end{enumerate}
\end{proof}

\begin{ex}
	Consider the measure space $([0,1], \borel([0,1]), \lambda)$ where $\borel([0,1])$ is the restriction of the Borel \siga to to $[0,1]$, and $\lambda$ is the restriction of the Lebesgue measure to $[0,1]$. Let $E_1, \dots, E_m$ be a collection of Borel measurable subsets of $[0,1]$ such that every element $x \in [0,1]$ belongs to at least $n$ sets in the collection $\{E_j\}_{j=1}^m$, where $n \leq m$. Show that there exists a $j \in \{1, \dots, m\}$ such that $\lambda(E_j) \geq \frac{n}{m}$.
\end{ex}

\begin{proof}
	Observe that if every $x \in [0, 1]$ belongs to at least $n$ sets in $(E_j)$ then we have that
	\begin{align*}
		\sum_{j = 1}^m \ind_{E_j}(x) \geq n,\ \forall x \in [0,1].
	\end{align*}
	We proceed by contradiction. Suppose $\lambda(E_j) < \frac{n}{m},\ \forall j \in \{1, \dots, m\}$. Then
	\begin{align*}
		n = \int_{[0,1]}n d\lambda
		\overset{\ref{rem:mu-integrals-monotone}}{\leq} \int_{[0,1]} \sum_{j=1}^{m}\ind_{E_j}(x)d\lambda
		= \sum_{j = 1}^m \lambda(E_j) < m \cdot \frac{n}{m} = n. 
	\end{align*}
	This is a contradiction, so there must exists at least one $j \in \{1, \dots, m\}$ such that $\lambda(E_j) \geq \frac{n}{m}$.
\end{proof}

\begin{ex}
	Consider the measure space $(\R, \borel(\R), \lambda)$ where $\borel(\R)$ is the Borel \siga over $\R$, and $\lambda$ is the one-dimensional Lebesgue measure. Let $f_n : \R \to \R$ be defined by
	\begin{align*}
		f_n(x) = \sum_{k = 0}^{2^n - 1}\frac{3k + 2^n}{2^n} \ind_{[k/2^n, (k+1)/2^n]}(x),\ n \geq 1.
	\end{align*}
	\begin{enumerate}
		\item Show that $f_n$ is measurable, and $f_n(x) \leq f_{n+1}(x)$, for all $x \in \R$.
		\item Show that $\int \sup_{n \geq 1} f_n d\lambda = \frac{5}{2}$.
	\end{enumerate}
\end{ex}

\begin{proof}$ $\newline
	\begin{enumerate}
		\item For a given $n$ and $k$ we define
		\begin{align*}
			a^n_k = \frac{3k + 2^n}{2^n}\text{ and } A^n_k = \left[\frac{k}{2^n}, \frac{k+1}{2^n}\right).
		\end{align*}
		Clearly, $A^n_k \in \borel(\R)$ for any $n$ and $k$ and $a^n_k > 0$. Therefore, $f_n$ is a simple function and thus $f_n$ is $\sa/\borel(\R)$-measurable.
		
		Notice that
		\begin{multline*}
			A_k^n = \left[\frac{k}{2^n}, \frac{k+1}{2^n}\right)
			= \left[\frac{2k}{2\cdot 2^n}, \frac{2k+2}{2\cdot 2^n}\right)\\
			= \left[\frac{2k}{2^{n+1}}, \frac{2k+1}{2^{n+1}}\right) \cupdot \left[\frac{2k+1}{2^{n+1}}, \frac{2k+2}{2^{n+1}}\right) = A_{2k}^{n+1} \cupdot A_{2k+1}^{n+1},
		\end{multline*}
		and
		\begin{align*}
			a_k^n = \frac{3k + 2^n}{2^n} = \frac{6k + 2^{n+1}}{2^{n+1}} = a_{2k}^{n+1} \leq a_{2k}^{n+1} + a_{2k+1}^{n+1}.
		\end{align*}
		Thus,
		\begin{align*}
			f_n = \sum_{k = 0}^{2^n - 1} a_k^n \ind_{A_k^n} \leq \sum_{k = 0}^{2^n - 1} a_{2k}^{n+1} \ind_{A_{2k}^{n+1}} + a_{2k+1}^{n+1} \ind_{A_{2k+1}^{n+1}} = f_{n+1}.
		\end{align*}
		
		\item Since $(f_n)$ is an increasing sequence of simple functions we now that
		\begin{align*}
			\int \sup_{n \geq 1} f_n d\mu = \sup_{n \geq 1} \int f_n d\mu = \sup_{n \geq 1} I_\mu(f_n) = \lim_{n \to \infty} I_\mu(f_n),
		\end{align*}
		and
		\begin{align*}
			I_\mu(f_n) = \sum_{k=0}^{2^n - 1} a_k^n \mu(A_k^n)
			&= \sum_{k = 0}^{2^n - 1} \frac{3k + 2^n}{2^n} \cdot \left(\frac{k+1}{2^n} - \frac{k}{2^n}\right)\\
			&= \sum_{k = 0}^{2^n - 1} \frac{3k}{2^n \cdot 2^n} + \frac{1}{2^n} = 1 + \frac{3}{2} \frac{2^n - 1}{2^n}
		\end{align*}.
		Thus,
		\begin{align*}
			\int \sup_{n \geq 1} f_n d \mu = \lim_{n \to \infty} I_\mu(f_n) = 1 + \frac{3}{2} = \frac{5}{2}.
		\end{align*}
	\end{enumerate}
\end{proof}

\begin{ex}
	Let $\mu$ and $\nu$ be two measures on the measure space $(E, \borel)$ sucht that $\mu(A) \leq \nu(A)$ for all $A \in \borel$. Show that if $f$ is any non-negative function on $(E, \borel)$, then $\int_E f d\mu \leq \int_E f d\nu$.
\end{ex}

\begin{proof}
	\footnote{Now that the solutions to this practice midterm have been published, I noticed there is a much more cleaner (and modular!) way of doing this. First prove it for $f = \ind_A$ for some $A\in \sa$. Then, prove it for $f \in \calE^+(\sa)$, for some simple function $f$. Finally, prove it for the general case. Each of these builds on the previous and you're left with something much more readable and useful.}By \autoref{thm:sombrero} we now that there exists a sequence of non-negative simple functions $(f_n)_{n\in\N} \subset \calE^+(\borel)$ such that $f_n \uparrow f$. Moreover, each of this simple functions has a representation of the form
	\begin{align*}
		f_n = \sum_{j=0}^{M_n} a_j \ind_{A_j}
	\end{align*}
	Thus,
	\begin{multline*}
		\int_E fd\mu
		= \lim_{n \to \infty} \int_E f_n d\mu
		= \lim_{n \to \infty} I_\mu(f_n) \\
		= \lim_{n \to \infty} \sum_{i = 1}^n \sum_{j=0}^{M_n} a_j \mu(A_j)
		\leq \lim_{n \to \infty} \sum_{i = 1}^n \sum_{j = 0}^{M_n} a_j \nu(A_j) \\
		= \lim_{n \to \infty} I_\nu(f_n) 
		= \lim_{n \to \infty} \int_E f_n d\nu
		= \int fd\nu
	\end{multline*}
\end{proof}